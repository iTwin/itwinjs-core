# iTwin.js Docs CI Build

trigger:
  branches:
    include:
      - master
      - release/*
    exclude:
      - release/2*
      - release/1*

pr:
  drafts: false
  branches:
    include:
      - master
      - release/*
    exclude:
      - release/2*
      - release/1*
  paths:
    exclude:
      - .github/CODEOWNERS

resources:
  pipelines:
  - pipeline: itwinjs-docs
    source: iTwin.js/Docs/iTwin.js Docs - YAML
    branch: master
  - pipeline: bis-docs
    source: BIS/Generate-Schema-Markdown-(GitHub)
    branch: master

jobs:
- template: ./docs-build.yaml
  parameters:
    workingDir: $(Pipeline.Workspace)/itwinjs-core
    outputDir: $(Agent.BuildDirectory)/tempDocsBuild/public_build
    shouldPublish: ${{ and(eq(variables['Build.Reason'], 'IndividualCI'), or(eq(variables['Build.SourceBranch'], 'refs/heads/master'), startsWith(variables['Build.SourceBranch'], 'refs/heads/release'))) }}
