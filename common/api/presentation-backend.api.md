## API Report File for "@itwin/presentation-backend"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { BeEvent } from '@itwin/core-bentley';
import { ComputeSelectionRequestOptions } from '@itwin/presentation-common';
import { Content } from '@itwin/presentation-common';
import { ContentDescriptorRequestOptions } from '@itwin/presentation-common';
import { ContentRequestOptions } from '@itwin/presentation-common';
import { ContentSourcesRequestOptions } from '@itwin/presentation-common';
import { Descriptor } from '@itwin/presentation-common';
import { DescriptorOverrides } from '@itwin/presentation-common';
import { Diagnostics } from '@itwin/presentation-common';
import { DiagnosticsOptions } from '@itwin/presentation-common';
import { DiagnosticsScopeLogs } from '@itwin/presentation-common';
import { DisplayLabelRequestOptions } from '@itwin/presentation-common';
import { DisplayLabelsRequestOptions } from '@itwin/presentation-common';
import { DisplayValueGroup } from '@itwin/presentation-common';
import { DistinctValuesRequestOptions } from '@itwin/presentation-common';
import { ElementProperties } from '@itwin/presentation-common';
import { Entity } from '@itwin/core-backend';
import { FilterByInstancePathsHierarchyRequestOptions } from '@itwin/presentation-common';
import { FilterByTextHierarchyRequestOptions } from '@itwin/presentation-common';
import { FormatsMap } from '@itwin/presentation-common';
import { HierarchyCompareInfo } from '@itwin/presentation-common';
import { HierarchyCompareOptions } from '@itwin/presentation-common';
import { HierarchyLevelDescriptorRequestOptions } from '@itwin/presentation-common';
import { HierarchyRequestOptions } from '@itwin/presentation-common';
import { Id64String } from '@itwin/core-bentley';
import { IDisposable } from '@itwin/core-bentley';
import { IModelDb } from '@itwin/core-backend';
import { InstanceKey } from '@itwin/presentation-common';
import { Item } from '@itwin/presentation-common';
import { KeySet } from '@itwin/presentation-common';
import { LabelDefinition } from '@itwin/presentation-common';
import { MultiElementPropertiesRequestOptions } from '@itwin/presentation-common';
import { Node as Node_2 } from '@itwin/presentation-common';
import { NodeKey } from '@itwin/presentation-common';
import { NodePathElement } from '@itwin/presentation-common';
import { Paged } from '@itwin/presentation-common';
import { PagedResponse } from '@itwin/presentation-common';
import { Prioritized } from '@itwin/presentation-common';
import { RegisteredRuleset } from '@itwin/presentation-common';
import { Ruleset } from '@itwin/presentation-common';
import { RulesetVariable } from '@itwin/presentation-common';
import { SchemaContext } from '@itwin/ecschema-metadata';
import { SelectClassInfo } from '@itwin/presentation-common';
import { SelectionScope } from '@itwin/presentation-common';
import { SelectionScopeRequestOptions } from '@itwin/presentation-common';
import { SingleElementPropertiesRequestOptions } from '@itwin/presentation-common';
import { UnitSystemFormat as UnitSystemFormat_2 } from '@itwin/presentation-common';
import { UnitSystemKey } from '@itwin/core-quantity';
import { VariableValue } from '@itwin/presentation-common';
import { VariableValueTypes } from '@itwin/presentation-common';
import { WithCancelEvent } from '@itwin/presentation-common';

// @public
export interface BackendDiagnosticsAttribute {
    // @beta
    diagnostics?: BackendDiagnosticsOptions;
}

// @beta
export type BackendDiagnosticsHandler<TContext = any> = (logs: Diagnostics, requestContext?: TContext) => void;

// @beta
export interface BackendDiagnosticsOptions<TContext = any> extends DiagnosticsOptions {
    handler: BackendDiagnosticsHandler<TContext>;
    requestContextSupplier?: () => TContext;
}

// @internal (undocumented)
export function combineDiagnosticsOptions(...options: Array<BackendDiagnosticsOptions | undefined>): DiagnosticsOptions | undefined;

// @public
export interface ContentCacheConfig {
    size?: number;
}

// @public
export interface DiskHierarchyCacheConfig extends HierarchyCacheConfigBase {
    directory?: string;
    memoryCacheSize?: number;
    // (undocumented)
    mode: HierarchyCacheMode.Disk;
}

// @internal (undocumented)
export function getElementKey(imodel: IModelDb, id: Id64String): InstanceKey | undefined;

// @internal (undocumented)
export function getLocalizedStringEN(key: string): string;

// @public
export type HierarchyCacheConfig = MemoryHierarchyCacheConfig | DiskHierarchyCacheConfig | HybridCacheConfig;

// @public
export interface HierarchyCacheConfigBase {
    // (undocumented)
    mode: HierarchyCacheMode;
}

// @public
export enum HierarchyCacheMode {
    Disk = "disk",
    Hybrid = "hybrid",
    Memory = "memory"
}

// @public
export interface HybridCacheConfig extends HierarchyCacheConfigBase {
    disk?: DiskHierarchyCacheConfig;
    // (undocumented)
    mode: HierarchyCacheMode.Hybrid;
}

// @public
export interface MemoryHierarchyCacheConfig extends HierarchyCacheConfigBase {
    // (undocumented)
    mode: HierarchyCacheMode.Memory;
}

// @public
export interface MultiElementPropertiesResponse<TParsedContent = ElementProperties> {
    // (undocumented)
    iterator: () => AsyncGenerator<TParsedContent[]>;
    // (undocumented)
    total: number;
}

// @public
export interface MultiManagerPresentationProps extends PresentationPropsBase {
    // @internal
    clientManagerFactory?: (clientId: string, props: PresentationManagerProps) => PresentationManager;
    unusedClientLifetime?: number;
}

// @internal (undocumented)
export function normalizeVersion(version?: string): string;

// @public
export class Presentation {
    static getManager(clientId?: string): PresentationManager;
    static getRequestTimeout(): number;
    static initialize(props?: PresentationProps): void;
    static get initProps(): PresentationProps | undefined;
    static terminate(): void;
}

// @public
export interface PresentationAssetsRootConfig {
    backend: string;
    // @deprecated
    common: string;
}

// @public
export enum PresentationBackendLoggerCategory {
    Ipc = "presentation-backend.Ipc",
    // (undocumented)
    Package = "presentation-backend",
    PresentationManager = "presentation-backend.PresentationManager",
    Rpc = "presentation-backend.Rpc"
}

// @public
export enum PresentationBackendNativeLoggerCategory {
    // (undocumented)
    ECObjects = "ECObjects",
    // (undocumented)
    ECObjects_ECExpressions = "ECObjects.ECExpressions",
    // (undocumented)
    ECObjects_ECExpressions_Evaluate = "ECObjects.ECExpressions.Evaluate",
    // (undocumented)
    ECObjects_ECExpressions_Parse = "ECObjects.ECExpressions.Parse",
    // (undocumented)
    ECPresentation = "ECPresentation",
    // (undocumented)
    ECPresentation_Connections = "ECPresentation.Connections",
    // (undocumented)
    ECPresentation_Content = "ECPresentation.Content",
    // (undocumented)
    ECPresentation_ECExpressions = "ECPresentation.ECExpressions",
    // (undocumented)
    ECPresentation_Hierarchies = "ECPresentation.Navigation",
    // (undocumented)
    ECPresentation_Hierarchies_Cache = "ECPresentation.Navigation.Cache",
    // @deprecated (undocumented)
    ECPresentation_Localization = "ECPresentation.Localization",
    // (undocumented)
    ECPresentation_Rules = "ECPresentation.Rules",
    // @deprecated (undocumented)
    ECPresentation_RulesEngine = "ECPresentation.RulesEngine",
    // @deprecated (undocumented)
    ECPresentation_RulesEngine_Content = "ECPresentation.Content",
    // @deprecated (undocumented)
    ECPresentation_RulesEngine_Localization = "ECPresentation.Localization",
    // @deprecated (undocumented)
    ECPresentation_RulesEngine_Navigation = "ECPresentation.Navigation",
    // @deprecated (undocumented)
    ECPresentation_RulesEngine_Navigation_Cache = "ECPresentation.Navigation.Cache",
    // @deprecated (undocumented)
    ECPresentation_RulesEngine_RulesetVariables = "ECPresentation.RulesetVariables",
    // @deprecated (undocumented)
    ECPresentation_RulesEngine_Threads = "ECPresentation.Tasks",
    // @deprecated (undocumented)
    ECPresentation_RulesEngine_Update = "ECPresentation.Update",
    // (undocumented)
    ECPresentation_RulesetVariables = "ECPresentation.RulesetVariables",
    // (undocumented)
    ECPresentation_Serialization = "ECPresentation.Serialization",
    // (undocumented)
    ECPresentation_Tasks = "ECPresentation.Tasks",
    // (undocumented)
    ECPresentation_Update = "ECPresentation.Update",
    // (undocumented)
    ECPresentation_Update_Content = "ECPresentation.Update.Content",
    // (undocumented)
    ECPresentation_Update_Hierarchies = "ECPresentation.Update.Hierarchies"
}

// @public
export class PresentationManager {
    constructor(props?: PresentationManagerProps);
    // @deprecated
    activeLocale: string | undefined;
    get activeUnitSystem(): UnitSystemKey | undefined;
    set activeUnitSystem(value: UnitSystemKey | undefined);
    compareHierarchies(requestOptions: HierarchyCompareOptions<IModelDb, NodeKey>): Promise<HierarchyCompareInfo>;
    // @deprecated
    computeSelection(requestOptions: SelectionScopeRequestOptions<IModelDb> & {
        ids: Id64String[];
        scopeId: string;
    } & BackendDiagnosticsAttribute): Promise<KeySet>;
    computeSelection(requestOptions: ComputeSelectionRequestOptions<IModelDb> & BackendDiagnosticsAttribute): Promise<KeySet>;
    dispose(): void;
    getContent(requestOptions: WithCancelEvent<Prioritized<Paged<ContentRequestOptions<IModelDb, Descriptor | DescriptorOverrides, KeySet, RulesetVariable>>>> & BackendDiagnosticsAttribute): Promise<Content | undefined>;
    getContentDescriptor(requestOptions: WithCancelEvent<Prioritized<ContentDescriptorRequestOptions<IModelDb, KeySet, RulesetVariable>>> & BackendDiagnosticsAttribute): Promise<Descriptor | undefined>;
    // @beta
    getContentSet(requestOptions: WithCancelEvent<Prioritized<Paged<ContentRequestOptions<IModelDb, Descriptor, KeySet, RulesetVariable>>>> & BackendDiagnosticsAttribute): Promise<Item[]>;
    getContentSetSize(requestOptions: WithCancelEvent<Prioritized<ContentRequestOptions<IModelDb, Descriptor | DescriptorOverrides, KeySet, RulesetVariable>>> & BackendDiagnosticsAttribute): Promise<number>;
    getContentSources(requestOptions: WithCancelEvent<Prioritized<ContentSourcesRequestOptions<IModelDb>>> & BackendDiagnosticsAttribute): Promise<SelectClassInfo[]>;
    // @internal (undocumented)
    getDetail(): PresentationManagerDetail;
    getDisplayLabelDefinition(requestOptions: WithCancelEvent<Prioritized<DisplayLabelRequestOptions<IModelDb, InstanceKey>>> & BackendDiagnosticsAttribute): Promise<LabelDefinition>;
    getDisplayLabelDefinitions(requestOptions: WithCancelEvent<Prioritized<Paged<DisplayLabelsRequestOptions<IModelDb, InstanceKey>>>> & BackendDiagnosticsAttribute): Promise<LabelDefinition[]>;
    getElementProperties(requestOptions: WithCancelEvent<Prioritized<SingleElementPropertiesRequestOptions<IModelDb>>> & BackendDiagnosticsAttribute): Promise<ElementProperties | undefined>;
    getElementProperties<TParsedContent = ElementProperties>(requestOptions: WithCancelEvent<Prioritized<MultiElementPropertiesRequestOptions<IModelDb, TParsedContent>>> & BackendDiagnosticsAttribute): Promise<MultiElementPropertiesResponse<TParsedContent>>;
    getFilteredNodePaths(requestOptions: WithCancelEvent<Prioritized<FilterByTextHierarchyRequestOptions<IModelDb, RulesetVariable>>> & BackendDiagnosticsAttribute): Promise<NodePathElement[]>;
    // @internal (undocumented)
    getNativePlatform: () => NativePlatformDefinition;
    getNodePaths(requestOptions: WithCancelEvent<Prioritized<FilterByInstancePathsHierarchyRequestOptions<IModelDb, RulesetVariable>>> & BackendDiagnosticsAttribute): Promise<NodePathElement[]>;
    getNodes(requestOptions: WithCancelEvent<Prioritized<Paged<HierarchyRequestOptions<IModelDb, NodeKey, RulesetVariable>>>> & BackendDiagnosticsAttribute): Promise<Node_2[]>;
    getNodesCount(requestOptions: WithCancelEvent<Prioritized<HierarchyRequestOptions<IModelDb, NodeKey, RulesetVariable>>> & BackendDiagnosticsAttribute): Promise<number>;
    // @beta
    getNodesDescriptor(requestOptions: WithCancelEvent<Prioritized<HierarchyLevelDescriptorRequestOptions<IModelDb, NodeKey, RulesetVariable>>> & BackendDiagnosticsAttribute): Promise<Descriptor | undefined>;
    getPagedDistinctValues(requestOptions: WithCancelEvent<Prioritized<DistinctValuesRequestOptions<IModelDb, Descriptor | DescriptorOverrides, KeySet, RulesetVariable>>> & BackendDiagnosticsAttribute): Promise<PagedResponse<DisplayValueGroup>>;
    // @internal (undocumented)
    getRulesetId(rulesetOrId: Ruleset | string): string;
    getSelectionScopes(_requestOptions: SelectionScopeRequestOptions<IModelDb> & BackendDiagnosticsAttribute): Promise<SelectionScope[]>;
    get props(): PresentationManagerProps;
    rulesets(): RulesetManager;
    // @internal (undocumented)
    setOnManagerUsedHandler(handler: () => void): void;
    vars(rulesetId: string): RulesetVariablesManager;
}

// @public
export interface PresentationManagerCachingConfig {
    content?: ContentCacheConfig;
    hierarchies?: HierarchyCacheConfig;
    workerConnectionCacheSize?: number;
}

// @public @deprecated
export enum PresentationManagerMode {
    ReadOnly = 0,
    ReadWrite = 1
}

// @public
export interface PresentationManagerProps {
    // @internal (undocumented)
    addon?: NativePlatformDefinition;
    caching?: PresentationManagerCachingConfig;
    defaultFormats?: FormatsMap;
    // @deprecated
    defaultLocale?: string;
    defaultUnitSystem?: UnitSystemKey;
    // @beta
    diagnostics?: BackendDiagnosticsOptions;
    // @deprecated
    enableSchemasPreload?: boolean;
    // @beta
    getLocalizedString?: (key: string) => string;
    // @internal
    id?: string;
    // @deprecated
    localeDirectories?: string[];
    // @deprecated
    mode?: PresentationManagerMode;
    // @deprecated
    presentationAssetsRoot?: string | PresentationAssetsRootConfig;
    rulesetDirectories?: string[];
    // @alpha
    schemaContextProvider?: (imodel: IModelDb) => SchemaContext;
    supplementalRulesetDirectories?: string[];
    // @beta @deprecated
    updatesPollInterval?: number;
    // @beta
    useMmap?: boolean | number;
    workerThreadsCount?: number;
}

// @public
export type PresentationProps = MultiManagerPresentationProps | SingleManagerPresentationProps;

// @public
export interface PresentationPropsBase extends PresentationManagerProps {
    enableSchemasPreload?: boolean;
    requestTimeout?: number;
}

// @internal (undocumented)
export function reportDiagnostics<TContext>(diagnostics: Diagnostics, options: BackendDiagnosticsOptions<TContext>, context?: TContext): void;

// @public
export class RulesetEmbedder {
    constructor(props: RulesetEmbedderProps);
    getRulesets(): Promise<Ruleset[]>;
    insertRuleset(ruleset: Ruleset, options?: RulesetInsertOptions): Promise<Id64String>;
}

// @public
export interface RulesetEmbedderProps {
    imodel: IModelDb;
}

// @public
export interface RulesetInsertOptions {
    onEntityInsert?: InsertCallbacks;
    onEntityUpdate?: UpdateCallbacks;
    replaceVersions?: "all" | "all-lower" | "exact";
    skip?: "never" | "same-id" | "same-id-and-version-eq" | "same-id-and-version-gte";
}

// @public
export interface RulesetManager {
    add(ruleset: Ruleset): RegisteredRuleset;
    clear(): void;
    get(id: string): RegisteredRuleset | undefined;
    remove(ruleset: RegisteredRuleset | [string, string]): boolean;
}

// @internal
export class RulesetManagerImpl implements RulesetManager {
    constructor(getNativePlatform: () => NativePlatformDefinition);
    add(ruleset: Ruleset): RegisteredRuleset;
    clear(): void;
    get(id: string): RegisteredRuleset | undefined;
    remove(ruleset: RegisteredRuleset | [string, string]): boolean;
}

// @public
export interface RulesetVariablesManager {
    getBool(variableId: string): boolean;
    getId64(variableId: string): Id64String;
    getId64s(variableId: string): Id64String[];
    getInt(variableId: string): number;
    getInts(variableId: string): number[];
    getString(variableId: string): string;
    getValue(variableId: string, type: VariableValueTypes): VariableValue;
    setBool(variableId: string, value: boolean): void;
    setId64(variableId: string, value: Id64String): void;
    setId64s(variableId: string, value: Id64String[]): void;
    setInt(variableId: string, value: number): void;
    setInts(variableId: string, value: number[]): void;
    setString(variableId: string, value: string): void;
    setValue(variableId: string, type: VariableValueTypes, value: VariableValue): void;
    unset(variableId: string): void;
}

// @internal
export class RulesetVariablesManagerImpl implements RulesetVariablesManager {
    constructor(getNativeAddon: () => NativePlatformDefinition, rulesetId: string);
    getBool(variableId: string): boolean;
    getId64(variableId: string): Id64String;
    getId64s(variableId: string): Id64String[];
    getInt(variableId: string): number;
    getInts(variableId: string): number[];
    getString(variableId: string): string;
    // (undocumented)
    getValue(variableId: string, type: VariableValueTypes): VariableValue;
    // (undocumented)
    getValueInternal(variableId: string, type: VariableValueTypes): VariableValue;
    setBool(variableId: string, value: boolean): void;
    setId64(variableId: string, value: Id64String): void;
    setId64s(variableId: string, value: Id64String[]): void;
    setInt(variableId: string, value: number): void;
    setInts(variableId: string, value: number[]): void;
    setString(variableId: string, value: string): void;
    // (undocumented)
    setValue(variableId: string, type: VariableValueTypes, value: VariableValue): void;
    // (undocumented)
    setValueInternal(variableId: string, type: VariableValueTypes, value: VariableValue): void;
    // (undocumented)
    unset(variableId: string): void;
}

// @public
export interface SingleManagerPresentationProps extends PresentationPropsBase {
    // @alpha
    useSingleManager?: boolean;
}

// @public @deprecated
export type UnitSystemFormat = UnitSystemFormat_2;

// (No @packageDocumentation comment for this package)

```
