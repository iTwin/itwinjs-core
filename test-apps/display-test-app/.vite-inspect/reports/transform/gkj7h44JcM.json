{
  "resolvedId": "D:/hub2023A/itwinjs-core/core/mobile/lib/cjs/frontend/MobileAuthorizationFrontend.js",
  "transforms": [
    {
      "name": "vite:load-fallback",
      "result": "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n* Copyright (c) Bentley Systems, Incorporated. All rights reserved.\n* See LICENSE.md in the project root for license terms and full copyright notice.\n*--------------------------------------------------------------------------------------------*/\n/** @packageDocumentation\n * @module OIDC\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MobileAuthorizationFrontend = void 0;\nconst MobileApp_1 = require(\"./MobileApp\");\n/** Utility to provide and cache auth tokens from native mobile apps to IModelApp.\n * @internal\n */\nclass MobileAuthorizationFrontend {\n    constructor() {\n        this._accessToken = \"\";\n        this._expiryBuffer = 60 * 10; // ten minutes\n        this._fetchingToken = false;\n    }\n    get _hasExpired() {\n        return this._expirationDate !== undefined && this._expirationDate.getTime() - Date.now() <= this._expiryBuffer * 1000;\n    }\n    async getAccessToken() {\n        if (this._fetchingToken) {\n            // NOTE: This function is from the AuthorizationClient interface. That interface documents\n            // this function to return an empty string if no token is available, NOT throw an exception.\n            return \"\"; // short-circuits any recursive use of this function\n        }\n        if (this._accessToken && !this._hasExpired) {\n            return this._accessToken;\n        }\n        else {\n            try {\n                this._fetchingToken = true;\n                const result = await MobileApp_1.MobileApp.callBackend(\"getAccessToken\");\n                this._accessToken = result[0];\n                this._expirationDate = result[1] ? new Date(result[1]) : undefined;\n                return this._accessToken;\n            }\n            catch (_ex) {\n                return \"\";\n            }\n            finally {\n                this._fetchingToken = false;\n            }\n        }\n    }\n    setAccessToken(accessToken, expirationDate) {\n        this._accessToken = accessToken ?? \"\";\n        this._expirationDate = expirationDate ? new Date(expirationDate) : undefined;\n    }\n}\nexports.MobileAuthorizationFrontend = MobileAuthorizationFrontend;\n//# sourceMappingURL=MobileAuthorizationFrontend.js.map",
      "start": 1693508125113,
      "end": 1693508125160,
      "sourcemaps": null
    },
    {
      "name": "commonjs",
      "result": "import * as commonjsHelpers from \"\u0000commonjsHelpers.js\";\nimport { __exports as MobileAuthorizationFrontend_1 } from \"\\u0000D:/hub2023A/itwinjs-core/core/mobile/lib/cjs/frontend/MobileAuthorizationFrontend.js?commonjs-exports\";\nimport { __require as require$$0 } from \"\\u0000D:/hub2023A/itwinjs-core/core/mobile/lib/cjs/frontend/MobileApp.js?commonjs-wrapped\";\n\nvar hasRequiredMobileAuthorizationFrontend;\n\nfunction requireMobileAuthorizationFrontend () {\n\tif (hasRequiredMobileAuthorizationFrontend) return MobileAuthorizationFrontend_1;\n\thasRequiredMobileAuthorizationFrontend = 1;\n\t\"use strict\";\n\t/*---------------------------------------------------------------------------------------------\n\t* Copyright (c) Bentley Systems, Incorporated. All rights reserved.\n\t* See LICENSE.md in the project root for license terms and full copyright notice.\n\t*--------------------------------------------------------------------------------------------*/\n\t/** @packageDocumentation\n\t * @module OIDC\n\t */\n\tObject.defineProperty(MobileAuthorizationFrontend_1, \"__esModule\", { value: true });\n\tMobileAuthorizationFrontend_1.MobileAuthorizationFrontend = void 0;\n\tconst MobileApp_1 = require$$0();\n\t/** Utility to provide and cache auth tokens from native mobile apps to IModelApp.\n\t * @internal\n\t */\n\tclass MobileAuthorizationFrontend {\n\t    constructor() {\n\t        this._accessToken = \"\";\n\t        this._expiryBuffer = 60 * 10; // ten minutes\n\t        this._fetchingToken = false;\n\t    }\n\t    get _hasExpired() {\n\t        return this._expirationDate !== undefined && this._expirationDate.getTime() - Date.now() <= this._expiryBuffer * 1000;\n\t    }\n\t    async getAccessToken() {\n\t        if (this._fetchingToken) {\n\t            // NOTE: This function is from the AuthorizationClient interface. That interface documents\n\t            // this function to return an empty string if no token is available, NOT throw an exception.\n\t            return \"\"; // short-circuits any recursive use of this function\n\t        }\n\t        if (this._accessToken && !this._hasExpired) {\n\t            return this._accessToken;\n\t        }\n\t        else {\n\t            try {\n\t                this._fetchingToken = true;\n\t                const result = await MobileApp_1.MobileApp.callBackend(\"getAccessToken\");\n\t                this._accessToken = result[0];\n\t                this._expirationDate = result[1] ? new Date(result[1]) : undefined;\n\t                return this._accessToken;\n\t            }\n\t            catch (_ex) {\n\t                return \"\";\n\t            }\n\t            finally {\n\t                this._fetchingToken = false;\n\t            }\n\t        }\n\t    }\n\t    setAccessToken(accessToken, expirationDate) {\n\t        this._accessToken = accessToken ?? \"\";\n\t        this._expirationDate = expirationDate ? new Date(expirationDate) : undefined;\n\t    }\n\t}\n\tMobileAuthorizationFrontend_1.MobileAuthorizationFrontend = MobileAuthorizationFrontend;\n\t//# sourceMappingURL=MobileAuthorizationFrontend.js.map\n\treturn MobileAuthorizationFrontend_1;\n}\n\nexport { requireMobileAuthorizationFrontend as __require };",
      "start": 1693508125160,
      "end": 1693508125162,
      "order": "normal",
      "sourcemaps": {
        "version": 3,
        "file": null,
        "sources": [
          null
        ],
        "sourcesContent": [
          null
        ],
        "names": [],
        "mappings": ";;;;;;;;;CAAA,YAAY,CAAC;CACb;CACA;CACA;CACA;CACA;CACA;CACA;CACA,MAAM,CAAC,cAAc,CAAC,6BAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9D,0DAAmC,GAAG,KAAK,CAAC,CAAC;CAC7C,MAAM,WAAW,GAAG,YAAsB,CAAC;CAC3C;CACA;CACA;CACA,MAAM,2BAA2B,CAAC;CAClC,IAAI,WAAW,GAAG;CAClB,QAAQ,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;CAC/B,QAAQ,IAAI,CAAC,aAAa,GAAG,EAAE,GAAG,EAAE,CAAC;CACrC,QAAQ,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;CACpC,KAAK;CACL,IAAI,IAAI,WAAW,GAAG;CACtB,QAAQ,OAAO,IAAI,CAAC,eAAe,KAAK,SAAS,IAAI,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,GAAG,EAAE,IAAI,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;CAC9H,KAAK;CACL,IAAI,MAAM,cAAc,GAAG;CAC3B,QAAQ,IAAI,IAAI,CAAC,cAAc,EAAE;CACjC;CACA;CACA,YAAY,OAAO,EAAE,CAAC;CACtB,SAAS;CACT,QAAQ,IAAI,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;CACpD,YAAY,OAAO,IAAI,CAAC,YAAY,CAAC;CACrC,SAAS;CACT,aAAa;CACb,YAAY,IAAI;CAChB,gBAAgB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;CAC3C,gBAAgB,MAAM,MAAM,GAAG,MAAM,WAAW,CAAC,SAAS,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;CACzF,gBAAgB,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;CAC9C,gBAAgB,IAAI,CAAC,eAAe,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC;CACnF,gBAAgB,OAAO,IAAI,CAAC,YAAY,CAAC;CACzC,aAAa;CACb,YAAY,OAAO,GAAG,EAAE;CACxB,gBAAgB,OAAO,EAAE,CAAC;CAC1B,aAAa;CACb,oBAAoB;CACpB,gBAAgB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;CAC5C,aAAa;CACb,SAAS;CACT,KAAK;CACL,IAAI,cAAc,CAAC,WAAW,EAAE,cAAc,EAAE;CAChD,QAAQ,IAAI,CAAC,YAAY,GAAG,WAAW,IAAI,EAAE,CAAC;CAC9C,QAAQ,IAAI,CAAC,eAAe,GAAG,cAAc,GAAG,IAAI,IAAI,CAAC,cAAc,CAAC,GAAG,SAAS,CAAC;CACrF,KAAK;CACL,CAAC;AACD,0DAAmC,GAAG,2BAA2B,CAAC;CAClE"
      }
    }
  ]
}
