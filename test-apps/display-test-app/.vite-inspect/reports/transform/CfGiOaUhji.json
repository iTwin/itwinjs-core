{
  "resolvedId": "D:/hub2023A/itwinjs-core/core/mobile/lib/cjs/frontend/MobileApp.js",
  "transforms": [
    {
      "name": "vite:load-fallback",
      "result": "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n* Copyright (c) Bentley Systems, Incorporated. All rights reserved.\n* See LICENSE.md in the project root for license terms and full copyright notice.\n*--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MobileApp = void 0;\nconst core_bentley_1 = require(\"@itwin/core-bentley\");\nconst core_common_1 = require(\"@itwin/core-common\");\nconst core_frontend_1 = require(\"@itwin/core-frontend\");\nconst MobileAppChannel_1 = require(\"../common/MobileAppChannel\");\nconst MobileRpcManager_1 = require(\"../common/MobileRpcManager\");\nconst MobileAuthorizationFrontend_1 = require(\"./MobileAuthorizationFrontend\");\n/** receive notifications from backend */\nclass MobileAppNotifyHandler extends core_frontend_1.NotificationHandler {\n    get channelName() { return MobileAppChannel_1.mobileAppStrings.mobileAppNotify; }\n    notifyMemoryWarning() {\n        core_bentley_1.Logger.logWarning(\"mobileApp\", \"Low memory warning\");\n        if (MobileApp.onMemoryWarning.numberOfListeners === 0) {\n            alert(\"Low memory warning\");\n        }\n        MobileApp.onMemoryWarning.raiseEvent();\n    }\n    notifyOrientationChanged() { MobileApp.onOrientationChanged.raiseEvent(); }\n    notifyWillTerminate() { MobileApp.onWillTerminate.raiseEvent(); }\n    notifyAuthAccessTokenChanged(accessToken, expirationDate) {\n        MobileApp.onAuthAccessTokenChanged.raiseEvent(accessToken, expirationDate);\n    }\n}\n/** @beta */\nclass MobileApp {\n    static async callBackend(methodName, ...args) {\n        return core_frontend_1.IpcApp.callIpcChannel(MobileAppChannel_1.mobileAppStrings.mobileAppChannel, methodName, ...args);\n    }\n    static get isValid() { return this._isValid; }\n    /** @beta */\n    static async startup(opts) {\n        attachDirectEventCallbacks();\n        const iModelAppOpts = {\n            ...opts?.iModelApp,\n        };\n        const authorizationClient = new MobileAuthorizationFrontend_1.MobileAuthorizationFrontend();\n        iModelAppOpts.authorizationClient = authorizationClient;\n        if (!this._isValid) {\n            this.onAuthAccessTokenChanged.addListener((accessToken, expirationDate) => {\n                authorizationClient.setAccessToken(accessToken, expirationDate);\n            });\n            const rpcInterfaces = opts?.iModelApp?.rpcInterfaces ?? [core_common_1.IModelReadRpcInterface, core_common_1.IModelTileRpcInterface]; // eslint-disable-line deprecation/deprecation\n            MobileRpcManager_1.MobileRpcManager.initializeClient(rpcInterfaces);\n            this._isValid = true;\n        }\n        const socket = new core_common_1.IpcWebSocketFrontend(); // needs work\n        await core_frontend_1.NativeApp.startup(socket, { ...opts, iModelApp: iModelAppOpts });\n        MobileAppNotifyHandler.register(); // receives notifications from backend\n    }\n}\nMobileApp.onMemoryWarning = new core_bentley_1.BeEvent();\nMobileApp.onOrientationChanged = new core_bentley_1.BeEvent();\nMobileApp.onEnterForeground = new core_bentley_1.BeEvent();\nMobileApp.onEnterBackground = new core_bentley_1.BeEvent();\nMobileApp.onWillTerminate = new core_bentley_1.BeEvent();\nMobileApp.onAuthAccessTokenChanged = new core_bentley_1.BeEvent();\nMobileApp._isValid = false;\nexports.MobileApp = MobileApp;\n/*\n  The suspend/resume lifecycle events cannot be reliably sent from the backend due to timing issues that arise when\n  inter-operating with the actual suspend and resume behavior on the native side.\n  Instead, they are sent directly to the browser here from platform-specific code.\n*/\nfunction attachDirectEventCallbacks() {\n    window._imodeljs_rpc_lifecycle = (evt) => {\n        if (evt === \"suspend\") {\n            MobileApp.onEnterBackground.raiseEvent();\n        }\n        else if (evt === \"resume\") {\n            MobileApp.onEnterForeground.raiseEvent();\n        }\n    };\n}\n//# sourceMappingURL=MobileApp.js.map",
      "start": 1693508122533,
      "end": 1693508122655,
      "sourcemaps": null
    },
    {
      "name": "commonjs",
      "result": "import * as commonjsHelpers from \"\u0000commonjsHelpers.js\";\nimport { __exports as MobileApp_1 } from \"\\u0000D:/hub2023A/itwinjs-core/core/mobile/lib/cjs/frontend/MobileApp.js?commonjs-exports\";\nimport require$$0 from \"\\u0000D:/hub2023A/itwinjs-core/core/bentley/lib/esm/core-bentley.js?commonjs-proxy\";\nimport require$$1 from \"\\u0000D:/hub2023A/itwinjs-core/core/common/lib/esm/core-common.js?commonjs-proxy\";\nimport require$$2 from \"\\u0000D:/hub2023A/itwinjs-core/core/frontend/lib/esm/core-frontend.js?commonjs-proxy\";\nimport require$$3 from \"\\u0000D:/hub2023A/itwinjs-core/core/mobile/lib/cjs/common/MobileAppChannel.js?commonjs-proxy\";\nimport { __require as require$$4 } from \"\\u0000D:/hub2023A/itwinjs-core/core/mobile/lib/cjs/common/MobileRpcManager.js?commonjs-wrapped\";\nimport { __require as require$$5 } from \"\\u0000D:/hub2023A/itwinjs-core/core/mobile/lib/cjs/frontend/MobileAuthorizationFrontend.js?commonjs-wrapped\";\n\nvar hasRequiredMobileApp;\n\nfunction requireMobileApp () {\n\tif (hasRequiredMobileApp) return MobileApp_1;\n\thasRequiredMobileApp = 1;\n\t\"use strict\";\n\t/*---------------------------------------------------------------------------------------------\n\t* Copyright (c) Bentley Systems, Incorporated. All rights reserved.\n\t* See LICENSE.md in the project root for license terms and full copyright notice.\n\t*--------------------------------------------------------------------------------------------*/\n\tObject.defineProperty(MobileApp_1, \"__esModule\", { value: true });\n\tMobileApp_1.MobileApp = void 0;\n\tconst core_bentley_1 = require$$0;\n\tconst core_common_1 = require$$1;\n\tconst core_frontend_1 = require$$2;\n\tconst MobileAppChannel_1 = require$$3;\n\tconst MobileRpcManager_1 = require$$4();\n\tconst MobileAuthorizationFrontend_1 = require$$5();\n\t/** receive notifications from backend */\n\tclass MobileAppNotifyHandler extends core_frontend_1.NotificationHandler {\n\t    get channelName() { return MobileAppChannel_1.mobileAppStrings.mobileAppNotify; }\n\t    notifyMemoryWarning() {\n\t        core_bentley_1.Logger.logWarning(\"mobileApp\", \"Low memory warning\");\n\t        if (MobileApp.onMemoryWarning.numberOfListeners === 0) {\n\t            alert(\"Low memory warning\");\n\t        }\n\t        MobileApp.onMemoryWarning.raiseEvent();\n\t    }\n\t    notifyOrientationChanged() { MobileApp.onOrientationChanged.raiseEvent(); }\n\t    notifyWillTerminate() { MobileApp.onWillTerminate.raiseEvent(); }\n\t    notifyAuthAccessTokenChanged(accessToken, expirationDate) {\n\t        MobileApp.onAuthAccessTokenChanged.raiseEvent(accessToken, expirationDate);\n\t    }\n\t}\n\t/** @beta */\n\tclass MobileApp {\n\t    static async callBackend(methodName, ...args) {\n\t        return core_frontend_1.IpcApp.callIpcChannel(MobileAppChannel_1.mobileAppStrings.mobileAppChannel, methodName, ...args);\n\t    }\n\t    static get isValid() { return this._isValid; }\n\t    /** @beta */\n\t    static async startup(opts) {\n\t        attachDirectEventCallbacks();\n\t        const iModelAppOpts = {\n\t            ...opts?.iModelApp,\n\t        };\n\t        const authorizationClient = new MobileAuthorizationFrontend_1.MobileAuthorizationFrontend();\n\t        iModelAppOpts.authorizationClient = authorizationClient;\n\t        if (!this._isValid) {\n\t            this.onAuthAccessTokenChanged.addListener((accessToken, expirationDate) => {\n\t                authorizationClient.setAccessToken(accessToken, expirationDate);\n\t            });\n\t            const rpcInterfaces = opts?.iModelApp?.rpcInterfaces ?? [core_common_1.IModelReadRpcInterface, core_common_1.IModelTileRpcInterface]; // eslint-disable-line deprecation/deprecation\n\t            MobileRpcManager_1.MobileRpcManager.initializeClient(rpcInterfaces);\n\t            this._isValid = true;\n\t        }\n\t        const socket = new core_common_1.IpcWebSocketFrontend(); // needs work\n\t        await core_frontend_1.NativeApp.startup(socket, { ...opts, iModelApp: iModelAppOpts });\n\t        MobileAppNotifyHandler.register(); // receives notifications from backend\n\t    }\n\t}\n\tMobileApp.onMemoryWarning = new core_bentley_1.BeEvent();\n\tMobileApp.onOrientationChanged = new core_bentley_1.BeEvent();\n\tMobileApp.onEnterForeground = new core_bentley_1.BeEvent();\n\tMobileApp.onEnterBackground = new core_bentley_1.BeEvent();\n\tMobileApp.onWillTerminate = new core_bentley_1.BeEvent();\n\tMobileApp.onAuthAccessTokenChanged = new core_bentley_1.BeEvent();\n\tMobileApp._isValid = false;\n\tMobileApp_1.MobileApp = MobileApp;\n\t/*\n\t  The suspend/resume lifecycle events cannot be reliably sent from the backend due to timing issues that arise when\n\t  inter-operating with the actual suspend and resume behavior on the native side.\n\t  Instead, they are sent directly to the browser here from platform-specific code.\n\t*/\n\tfunction attachDirectEventCallbacks() {\n\t    window._imodeljs_rpc_lifecycle = (evt) => {\n\t        if (evt === \"suspend\") {\n\t            MobileApp.onEnterBackground.raiseEvent();\n\t        }\n\t        else if (evt === \"resume\") {\n\t            MobileApp.onEnterForeground.raiseEvent();\n\t        }\n\t    };\n\t}\n\t//# sourceMappingURL=MobileApp.js.map\n\treturn MobileApp_1;\n}\n\nexport { requireMobileApp as __require };",
      "start": 1693508122655,
      "end": 1693508125164,
      "order": "normal",
      "sourcemaps": {
        "version": 3,
        "file": null,
        "sources": [
          null
        ],
        "sourcesContent": [
          null
        ],
        "names": [],
        "mappings": "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"
      }
    }
  ]
}
