{
  "resolvedId": "D:/hub2023A/itwinjs-core/core/mobile/lib/cjs/common/MobileIpc.js",
  "transforms": [
    {
      "name": "vite:load-fallback",
      "result": "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n* Copyright (c) Bentley Systems, Incorporated. All rights reserved.\n* See LICENSE.md in the project root for license terms and full copyright notice.\n*--------------------------------------------------------------------------------------------*/\n/** @packageDocumentation\n * @module RpcInterface\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MobileIpcTransport = void 0;\nconst core_common_1 = require(\"@itwin/core-common\");\nconst MobileEventLoop_1 = require(\"./MobileEventLoop\");\nconst MobileRpcProtocol_1 = require(\"./MobileRpcProtocol\");\nconst MobileRpcRequest_1 = require(\"./MobileRpcRequest\");\nconst IPC = \"__ipc__\";\nclass IpcInterface extends core_common_1.RpcInterface {\n    async send() { }\n}\nIpcInterface.interfaceName = IPC;\nIpcInterface.interfaceVersion = \"0.0.0\";\n/** @internal */\nclass MobileIpcTransport extends core_common_1.IpcWebSocketTransport {\n    constructor(protocol) {\n        super();\n        this._protocol = protocol;\n        core_common_1.RpcManager.initializeInterface(IpcInterface);\n        this._client = core_common_1.RpcManager.getClientForInterface(IpcInterface);\n    }\n    send(message) {\n        if (message.type === core_common_1.IpcWebSocketMessageType.Send || message.type === core_common_1.IpcWebSocketMessageType.Invoke) {\n            this.sendToBackend(message); // eslint-disable-line @typescript-eslint/no-floating-promises\n        }\n        else if (message.type === core_common_1.IpcWebSocketMessageType.Push || message.type === core_common_1.IpcWebSocketMessageType.Response) {\n            this.sendToFrontend(message); // eslint-disable-line @typescript-eslint/no-floating-promises\n        }\n    }\n    consumeRequest(request) {\n        if (request.operation.interfaceDefinition !== IPC)\n            return false;\n        const message = core_common_1.RpcMarshaling.deserialize(this._protocol, request.parameters)[0];\n        this.broadcast({}, message);\n        return true;\n    }\n    consumeResponse(response) {\n        if (response.interfaceName !== IPC)\n            return false;\n        const message = core_common_1.RpcMarshaling.deserialize(this._protocol, response.result);\n        this.broadcast({}, message);\n        return true;\n    }\n    async sendToBackend(message) {\n        const request = new MobileRpcRequest_1.MobileRpcRequest(this._client, \"send\", [message]);\n        const encoded = await MobileRpcProtocol_1.MobileRpcProtocol.encodeRequest(request);\n        this._protocol.sendToBackend(encoded);\n        request.dispose();\n    }\n    async sendToFrontend(message) {\n        MobileEventLoop_1.MobileEventLoop.addTask();\n        const result = await core_common_1.RpcMarshaling.serialize(this._protocol, message);\n        MobileEventLoop_1.MobileEventLoop.removeTask();\n        const fulfillment = { result, rawResult: message, interfaceName: IPC, id: message.channel, status: 0 };\n        const encoded = MobileRpcProtocol_1.MobileRpcProtocol.encodeResponse(fulfillment);\n        this._protocol.sendToFrontend(encoded);\n    }\n    broadcast(evt, message) {\n        for (const listener of core_common_1.IpcWebSocket.receivers)\n            listener(evt, message);\n    }\n}\nexports.MobileIpcTransport = MobileIpcTransport;\n//# sourceMappingURL=MobileIpc.js.map",
      "start": 1693508125107,
      "end": 1693508125134,
      "sourcemaps": null
    },
    {
      "name": "commonjs",
      "result": "import * as commonjsHelpers from \"\u0000commonjsHelpers.js\";\nimport { __exports as MobileIpc } from \"\\u0000D:/hub2023A/itwinjs-core/core/mobile/lib/cjs/common/MobileIpc.js?commonjs-exports\";\nimport require$$0 from \"\\u0000D:/hub2023A/itwinjs-core/core/common/lib/esm/core-common.js?commonjs-proxy\";\nimport require$$1 from \"\\u0000D:/hub2023A/itwinjs-core/core/mobile/lib/cjs/common/MobileEventLoop.js?commonjs-proxy\";\nimport { __require as require$$2 } from \"\\u0000D:/hub2023A/itwinjs-core/core/mobile/lib/cjs/common/MobileRpcProtocol.js?commonjs-wrapped\";\nimport { __require as require$$3 } from \"\\u0000D:/hub2023A/itwinjs-core/core/mobile/lib/cjs/common/MobileRpcRequest.js?commonjs-wrapped\";\n\nvar hasRequiredMobileIpc;\n\nfunction requireMobileIpc () {\n\tif (hasRequiredMobileIpc) return MobileIpc;\n\thasRequiredMobileIpc = 1;\n\t\"use strict\";\n\t/*---------------------------------------------------------------------------------------------\n\t* Copyright (c) Bentley Systems, Incorporated. All rights reserved.\n\t* See LICENSE.md in the project root for license terms and full copyright notice.\n\t*--------------------------------------------------------------------------------------------*/\n\t/** @packageDocumentation\n\t * @module RpcInterface\n\t */\n\tObject.defineProperty(MobileIpc, \"__esModule\", { value: true });\n\tMobileIpc.MobileIpcTransport = void 0;\n\tconst core_common_1 = require$$0;\n\tconst MobileEventLoop_1 = require$$1;\n\tconst MobileRpcProtocol_1 = require$$2();\n\tconst MobileRpcRequest_1 = require$$3();\n\tconst IPC = \"__ipc__\";\n\tclass IpcInterface extends core_common_1.RpcInterface {\n\t    async send() { }\n\t}\n\tIpcInterface.interfaceName = IPC;\n\tIpcInterface.interfaceVersion = \"0.0.0\";\n\t/** @internal */\n\tclass MobileIpcTransport extends core_common_1.IpcWebSocketTransport {\n\t    constructor(protocol) {\n\t        super();\n\t        this._protocol = protocol;\n\t        core_common_1.RpcManager.initializeInterface(IpcInterface);\n\t        this._client = core_common_1.RpcManager.getClientForInterface(IpcInterface);\n\t    }\n\t    send(message) {\n\t        if (message.type === core_common_1.IpcWebSocketMessageType.Send || message.type === core_common_1.IpcWebSocketMessageType.Invoke) {\n\t            this.sendToBackend(message); // eslint-disable-line @typescript-eslint/no-floating-promises\n\t        }\n\t        else if (message.type === core_common_1.IpcWebSocketMessageType.Push || message.type === core_common_1.IpcWebSocketMessageType.Response) {\n\t            this.sendToFrontend(message); // eslint-disable-line @typescript-eslint/no-floating-promises\n\t        }\n\t    }\n\t    consumeRequest(request) {\n\t        if (request.operation.interfaceDefinition !== IPC)\n\t            return false;\n\t        const message = core_common_1.RpcMarshaling.deserialize(this._protocol, request.parameters)[0];\n\t        this.broadcast({}, message);\n\t        return true;\n\t    }\n\t    consumeResponse(response) {\n\t        if (response.interfaceName !== IPC)\n\t            return false;\n\t        const message = core_common_1.RpcMarshaling.deserialize(this._protocol, response.result);\n\t        this.broadcast({}, message);\n\t        return true;\n\t    }\n\t    async sendToBackend(message) {\n\t        const request = new MobileRpcRequest_1.MobileRpcRequest(this._client, \"send\", [message]);\n\t        const encoded = await MobileRpcProtocol_1.MobileRpcProtocol.encodeRequest(request);\n\t        this._protocol.sendToBackend(encoded);\n\t        request.dispose();\n\t    }\n\t    async sendToFrontend(message) {\n\t        MobileEventLoop_1.MobileEventLoop.addTask();\n\t        const result = await core_common_1.RpcMarshaling.serialize(this._protocol, message);\n\t        MobileEventLoop_1.MobileEventLoop.removeTask();\n\t        const fulfillment = { result, rawResult: message, interfaceName: IPC, id: message.channel, status: 0 };\n\t        const encoded = MobileRpcProtocol_1.MobileRpcProtocol.encodeResponse(fulfillment);\n\t        this._protocol.sendToFrontend(encoded);\n\t    }\n\t    broadcast(evt, message) {\n\t        for (const listener of core_common_1.IpcWebSocket.receivers)\n\t            listener(evt, message);\n\t    }\n\t}\n\tMobileIpc.MobileIpcTransport = MobileIpcTransport;\n\t//# sourceMappingURL=MobileIpc.js.map\n\treturn MobileIpc;\n}\n\nexport { requireMobileIpc as __require };",
      "start": 1693508125134,
      "end": 1693508125138,
      "order": "normal",
      "sourcemaps": {
        "version": 3,
        "file": null,
        "sources": [
          null
        ],
        "sourcesContent": [
          null
        ],
        "names": [],
        "mappings": "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"
      }
    }
  ]
}
